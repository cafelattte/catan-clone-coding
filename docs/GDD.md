# Settlus of Catan - Game Design Document

**Author:** BMad
**Game Type:** Strategy (Board Game Clone)
**Target Platform(s):** PC (Windows/Mac/Linux), Mobile (Android/iOS)
**Engine:** Love2D
**Date:** 2025-11-30

---

## Executive Summary

### Core Concept

클래식 카탄의 핵심 재미를 충실히 재현한 미니멀 스타일의 전략 보드게임. TDD 기반 개발과 AI 워크플로우 활용을 통한 학습 프로젝트.

### Target Audience

| 항목 | 내용 |
|------|------|
| 주 대상 | 개발자 본인 (학습 목적) |
| 부 대상 | 카탄 팬, 보드게임 애호가 |
| 플레이 세션 | 30-60분 |
| 플레이어 수 | 2-4인 (로컬 핫시트) |

### Unique Selling Points (USPs)

> *클론 프로젝트 - 차별화보다 원작 충실도 우선*

- 원작 카탄 룰의 정확한 디지털 구현
- 미니멀한 UI로 룰 학습 부담 최소화
- 크로스 플랫폼 (PC/Mobile)

---

## Goals and Context

### Project Goals

| 우선순위 | 목표 |
|:--------:|------|
| 1 | TDD 기반 게임 개발 역량 강화 |
| 2 | Love2D/Lua 게임 개발 경험 축적 |
| 3 | AI 워크플로우 활용 개발 프로세스 체득 |
| 4 | 확장 가능한 아키텍처 설계 경험 |

### Background and Rationale

카탄은 검증된 게임 디자인을 가진 클래식 보드게임으로, 복잡한 룰과 헥스 좌표계 구현이 필요하여 학습 프로젝트로 적합함. 원작 룰이 명확하게 정의되어 있어 게임 디자인보다 구현 자체에 집중할 수 있음.

---

## Core Gameplay

### Game Pillars

| 순서 | Pillar | 설명 |
|:---:|--------|------|
| 1 | **자원 관리** | 주사위 → 타일 → 자원 생산 사이클 |
| 2 | **건설 전략** | 정착지/도시/도로 배치 결정 |
| 3 | **영역 경쟁** | 제한된 정점/변에서의 위치 선점 |

### Core Gameplay Loop

```
┌─────────────────────────────────────────────────┐
│                    턴 시작                        │
└─────────────────┬───────────────────────────────┘
                  ▼
┌─────────────────────────────────────────────────┐
│           1. 주사위 굴리기 (2d6)                  │
│              - 합계 숫자 결정                     │
└─────────────────┬───────────────────────────────┘
                  ▼
┌─────────────────────────────────────────────────┐
│           2. 자원 생산                           │
│              - 해당 숫자 타일 인접 건물 소유자     │
│              - 정착지: 1개, 도시: 2개             │
└─────────────────┬───────────────────────────────┘
                  ▼
┌─────────────────────────────────────────────────┐
│           3. 건설/거래 (선택)                     │
│              - 자원 소비하여 건설                 │
│              - 다른 플레이어와 거래 (3차 구현)     │
└─────────────────┬───────────────────────────────┘
                  ▼
┌─────────────────────────────────────────────────┐
│           4. 승리 조건 체크                       │
│              - 10점 도달 시 게임 종료             │
└─────────────────┬───────────────────────────────┘
                  ▼
                다음 플레이어 턴
```

### Win/Loss Conditions

| 조건 | 설명 |
|------|------|
| **승리** | 10점 먼저 달성 |
| **점수 획득** | 정착지(1점), 도시(2점), 최장도로(2점), 최대군대(2점), 승점카드(1점) |
| **패배** | 다른 플레이어가 먼저 10점 달성 |

---

## Game Mechanics

### Primary Mechanics

#### MVP 필수 메커닉

| 메커닉 | 설명 | 구현 우선순위 |
|--------|------|:------------:|
| **헥스 보드** | 19개 헥스 타일, 랜덤 배치, 숫자 토큰 | Phase 2-3 |
| **주사위 굴리기** | 2d6, 합계로 자원 생산 결정 | Phase 4 |
| **자원 생산** | 5종 자원 (목재, 벽돌, 양모, 밀, 광석) | Phase 1 |
| **건설** | 정착지, 도시, 도로 건설 | Phase 4 |
| **건설 규칙** | 거리 규칙, 연결 규칙 검증 | Phase 4 |

#### 2차 구현 메커닉

| 메커닉 | 설명 |
|--------|------|
| **개발 카드** | 기사, 승점, 독점, 도로건설, 발명 |
| **도둑** | 7 굴림 시 도둑 이동, 자원 7개 초과 시 절반 버림 |

#### 3차 구현 메커닉

| 메커닉 | 설명 |
|--------|------|
| **거래** | 플레이어 간 자원 교환, 항구 거래 |
| **최장 도로** | 연속 5개 이상 도로 보유 시 2점 |
| **최대 군대** | 기사 카드 3장 이상 사용 시 2점 |

### Controls and Input

#### PC (Primary)

| 입력 | 동작 |
|------|------|
| 마우스 클릭 | 타일/정점/변 선택 |
| 마우스 호버 | 건설 가능 위치 하이라이트 |
| 키보드 단축키 | 턴 종료, 건설 메뉴 |

#### Mobile (Secondary)

| 입력 | 동작 |
|------|------|
| 탭 | 선택 |
| 드래그 | 보드 이동 |
| 핀치 | 줌 인/아웃 |

---

## Strategy Specific Elements

### Resource Systems

#### 자원 타입

| 자원 | 생산 타일 | 용도 |
|------|----------|------|
| 🪵 목재 (Wood) | 숲 (Forest) | 도로, 정착지 |
| 🧱 벽돌 (Brick) | 언덕 (Hills) | 도로, 정착지 |
| 🐑 양모 (Sheep) | 목초지 (Pasture) | 정착지, 개발카드 |
| 🌾 밀 (Wheat) | 농장 (Fields) | 정착지, 도시, 개발카드 |
| �ite 광석 (Ore) | 산 (Mountains) | 도시, 개발카드 |

#### 건설 비용

| 건물 | 비용 | 점수 |
|------|------|:----:|
| 도로 | 목재 1 + 벽돌 1 | 0 |
| 정착지 | 목재 1 + 벽돌 1 + 양모 1 + 밀 1 | 1 |
| 도시 | 밀 2 + 광석 3 | 2 |
| 개발카드 | 양모 1 + 밀 1 + 광석 1 | - |

### Unit Types and Stats

> *N/A - 유닛 시스템 없음 (건물 기반 게임)*

### Technology and Progression

> *N/A - 테크 트리 없음 (건물 업그레이드만 존재: 정착지 → 도시)*

### Map and Terrain

#### 보드 구성

| 항목 | 수량 | 설명 |
|------|:----:|------|
| 헥스 타일 | 19개 | 중앙 1 + 내부 링 6 + 외부 링 12 |
| 정점 (Vertex) | 54개 | 건물 배치 위치 |
| 변 (Edge) | 72개 | 도로 배치 위치 |

#### 타일 분포

| 지형 | 수량 | 자원 |
|------|:----:|------|
| 숲 | 4 | 목재 |
| 언덕 | 3 | 벽돌 |
| 목초지 | 4 | 양모 |
| 농장 | 4 | 밀 |
| 산 | 3 | 광석 |
| 사막 | 1 | 없음 (도둑 시작) |

#### 숫자 토큰 분포

| 숫자 | 수량 | 확률 |
|:----:|:----:|:----:|
| 2, 12 | 1개씩 | 2.78% |
| 3, 11 | 2개씩 | 5.56% |
| 4, 10 | 2개씩 | 8.33% |
| 5, 9 | 2개씩 | 11.11% |
| 6, 8 | 2개씩 | 13.89% |
| 7 | 0 (도둑) | 16.67% |

### AI Opponent

> *MVP 범위 외 - 나중에 구현*

**향후 고려사항:**
- 난이도: Easy / Medium / Hard
- 알고리즘: 휴리스틱 기반 (몬테카를로는 복잡도 높음)
- 행동 패턴: 건설 우선, 자원 축적, 방해 전략

### Victory Conditions

| 조건 | 점수 | 설명 |
|------|:----:|------|
| 정착지 | 1점 | 최대 5개 |
| 도시 | 2점 | 최대 4개 (정착지 업그레이드) |
| 최장 도로 | 2점 | 연속 5개 이상 도로 (3차 구현) |
| 최대 군대 | 2점 | 기사 카드 3장 이상 (2차 구현) |
| 승점 카드 | 1점 | 개발카드 덱에서 획득 (2차 구현) |
| **승리** | **10점** | 먼저 도달한 플레이어 승리 |

---

## Progression and Balance

### Player Progression

#### 게임 내 진행

```
초기 배치 (무료 정착지 2개 + 도로 2개)
    ↓
자원 축적 단계 (주사위 운 + 위치 전략)
    ↓
확장 단계 (도로 → 새 정착지)
    ↓
강화 단계 (정착지 → 도시 업그레이드)
    ↓
승리 경쟁 (10점 레이스)
```

#### 세션 간 진행

> *N/A - 단판 게임, 메타 진행 없음*

### Difficulty Curve

| 단계 | 복잡도 | 학습 요소 |
|------|:------:|----------|
| 초기 배치 | 높음 | 위치 선정의 중요성 |
| 초반 | 낮음 | 자원 생산 이해 |
| 중반 | 중간 | 건설 우선순위 결정 |
| 후반 | 높음 | 경쟁 상황 판단, 점수 계산 |

### Economy and Resources

#### 자원 흐름

```
주사위 굴림 → 자원 생산 → 자원 소비 (건설)
                ↓
            자원 거래 (3차 구현)
                ↓
            항구 거래 (4:1 또는 특수 항구)
```

#### 경제 밸런스 (원작 기준)

- 평균 자원 생산: 턴당 1-2개
- 정착지 건설 비용: 4자원
- 도시 업그레이드 비용: 5자원
- 예상 게임 길이: 15-25턴

---

## Level Design Framework

### Level Types

> *N/A - 단일 보드, 레벨 개념 없음*

#### 보드 생성

| 항목 | 방식 |
|------|------|
| 타일 배치 | 랜덤 셔플 |
| 숫자 토큰 | 알파벳 순서 또는 랜덤 |
| 항구 | 고정 위치 (원작 기준) |

### Level Progression

> *N/A - 단판 게임*

---

## Art and Audio Direction

### Art Style

| 항목 | 방향 |
|------|------|
| 전체 스타일 | 미니멀 / 플랫 디자인 |
| 색상 | 자원별 구분 명확한 팔레트 |
| 타일 | 단색 + 아이콘 |
| 건물 | 기하학적 심볼 |
| UI | 깔끔한 정보 표시 |

**우선순위:** 기능 구현 > 비주얼 품질

### Audio and Music

> *MVP 범위 외 - 선택적 구현*

| 항목 | 계획 |
|------|------|
| BGM | 없음 또는 로열티 프리 |
| SFX | 기본 피드백 (클릭, 건설, 주사위) |
| 음성 | 없음 |

---

## Technical Specifications

### Performance Requirements

| 항목 | 목표 |
|------|------|
| 프레임레이트 | 60 FPS (PC), 30 FPS (Mobile) |
| 메모리 | < 100MB |
| 로드 시간 | < 3초 |
| 배터리 | 모바일 최적화 (나중에) |

### Platform-Specific Details

#### PC (Primary)

| 항목 | 스펙 |
|------|------|
| 최소 해상도 | 1280x720 |
| 권장 해상도 | 1920x1080 |
| 입력 | 마우스 + 키보드 |
| 배포 | Love2D 실행 파일 |

#### Mobile (Secondary - 나중에)

| 항목 | 스펙 |
|------|------|
| 최소 해상도 | 720p |
| 입력 | 터치 |
| 배포 | love-android / love-ios |

### Asset Requirements

| 카테고리 | 예상 수량 | 설명 |
|----------|:--------:|------|
| 타일 스프라이트 | 6개 | 지형별 |
| 건물 스프라이트 | 3개 × 4색 | 정착지, 도시, 도로 × 플레이어색 |
| UI 요소 | ~20개 | 버튼, 패널, 아이콘 |
| 폰트 | 1-2개 | 시스템 폰트 또는 번들 |

---

## Development Epics

### Epic Structure

#### Phase 0: 환경 설정
- 프로젝트 구조 생성
- 라이브러리 설치 (busted, serpent, classic, hump)
- 테스트 프레임워크 설정

#### Phase 1: 데이터 모델
- 자원 타입 정의
- 건물 비용 정의
- 플레이어 자원 관리 (add/remove/has)
- 승리 점수 계산

#### Phase 2: 헥스 좌표계
- Axial ↔ Cube ↔ Pixel 변환
- 이웃 헥스 계산
- 정점/변 정규화
- 디버그 유틸리티

#### Phase 3: 보드 상태
- 타일 배치 & 숫자 토큰
- 정점에 건물 배치
- 변에 도로 배치
- 특정 숫자의 타일 조회

#### Phase 4: 게임 로직
- 주사위 → 자원 분배
- 건설 가능 위치 검증
- 건설 실행 (자원 차감 + 배치)
- 초기 배치 규칙
- 승리 조건 체크

#### Phase 5: UI/렌더링
- 헥스 보드 렌더링
- 건물/도로 렌더링
- HUD (자원, 점수)
- 입력 처리 (클릭 → 헥스/정점/변 변환)

#### Phase 6: 게임 플로우
- 턴 순서 관리
- 페이즈 전이
- 게임 시작/종료
- 핫시트 멀티플레이어

---

## Success Metrics

### Technical Metrics

| 지표 | 목표 |
|------|------|
| TDD 커버리지 | `src/game/` 90%+ |
| 프레임레이트 | 60 FPS 유지 |
| 메모리 누수 | 0 |
| 크래시 | 0 |

### Gameplay Metrics

| 지표 | 목표 |
|------|------|
| 완전한 게임 진행 | 가능 |
| 룰 정확성 | 원작 100% 일치 |
| 버그 | 게임 진행 불가 버그 0 |

---

## Out of Scope

### MVP 제외 항목

- [ ] 온라인 멀티플레이어
- [ ] AI 상대
- [ ] 확장팩 룰 (항해자, 도시와 기사 등)
- [ ] 커스텀 맵
- [ ] 리플레이 저장/로드
- [ ] 튜토리얼
- [ ] 사운드/음악

### 2차 이후 고려

- 개발 카드 시스템
- 도둑 메커닉
- 거래 시스템
- 최장 도로 / 최대 군대
- AI 상대

---

## Assumptions and Dependencies

### 기술적 가정

| 가정 | 근거 |
|------|------|
| Love2D가 헥스 렌더링에 충분 | 2D 게임, 복잡한 그래픽 없음 |
| busted로 TDD 가능 | Lua 표준 테스트 프레임워크 |
| 순수 로직 분리 가능 | `src/game/`은 Love2D 의존 없음 |

### 외부 의존성

| 의존성 | 용도 | 라이선스 |
|--------|------|----------|
| Love2D | 게임 엔진 | zlib |
| busted | 테스트 | MIT |
| serpent | 직렬화 | MIT |
| classic | 클래스 | MIT |
| hump.gamestate | 상태관리 | MIT |

### 참고 자료

| 리소스 | URL |
|--------|-----|
| Red Blob Games - Hexagonal Grids | https://www.redblobgames.com/grids/hexagons/ |
| Love2D Wiki | https://love2d.org/wiki/Main_Page |
| Colonist.io | https://colonist.io/ |
| 카탄 공식 룰북 | - |

---

_This GDD is based on the Game Brief: `docs/game-brief-settlus-of-catan-2025-11-30.md`_

_Next Steps: `/bmad:bmgd:workflows:game-architecture` 워크플로우로 기술 아키텍처 설계_
